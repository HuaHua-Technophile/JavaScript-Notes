<!DOCTYPE html>
<html lang="zh-CN" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="https://i.328888.xyz/2023/04/14/ixDL13.jpeg"
      type="image/png" />
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <link
      href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0-alpha3/css/bootstrap.css"
      rel="stylesheet" />
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0-alpha3/js/bootstrap.bundle.js"></script>
    <title>23-2-7扩展原型方法</title>
  </head>
  <body>
    <p>
      扩展原型方法是一种向现有的类型或接口添加新的方法的技术，而不需要修改或重新编译原始类型。扩展原型方法是一种静态方法，但可以像实例方法一样调用
    </p>
    <p>
      扩展原型方法的一般步骤是：
      <li>
        在要扩展的类型或接口的原型对象上定义一个静态方法，该方法可以使用this关键字来引用调用该方法的对象实例，并实现所需的功能。
      </li>
      <li>
        在需要使用扩展原型方法的地方，使用实例方法的语法来调用扩展原型方法
      </li>
    </p>
    <p>
      例如，下面的代码演示了如何为Array类型定义一个扩展原型方法，用于去除数组中的重复元素
    </p>
    <script>
      Array.prototype.myUnique = function () {
        // 使用this关键字来引用调用该方法的数组实例
        // 使用一个对象来存储已经出现过的元素
        let obj = {};
        for (let i = 0; i < this.length; i++) {
          let cur = this[i]; // 先找到当前值
          if (obj[cur] === cur) {
            // 如果重复
            this.splice(i, 1); // 删除当前元素
            i--; // 索引要回退一位
          } else {
            obj[cur] = cur; // 如果不重复，就记录下来
          }
        }
        return this; // 返回去重后的数组
      };
      // 在需要使用扩展原型方法的地方，使用实例方法的语法来调用扩展原型方法
      let arr = [1, 2, 3, 4, 4, 3, 2, 1];
      let result = arr.myUnique();
      console.log(result); // [1, 2, 3, 4]
    </script>
  </body>
</html>
