<!DOCTYPE html>
<html lang="zh-CN" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="https://i.328888.xyz/2023/04/14/ixDL13.jpeg"
      type="image/png" />
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <link
      href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0-alpha3/css/bootstrap.css"
      rel="stylesheet" />
    <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.0-alpha3/js/bootstrap.bundle.js"></script>
    <title>28-1-3FormData对象,发送表单数据</title>
  </head>
  <body>
    <p>
      FormData对象是一个用于将数据编译成键值对的接口，可以用于通过XMLHttpRequest发送数据
    </p>
    <p>
      FormData对象的作用有以下几点
      <li>
        模拟HTML表单，相当于将HTML表单映射成表单对象，自动将表单对象中的数据拼接成请求参数的格式。
      </li>
      <li>异步上传二进制文件，如图片、视频等。</li>
      <li>附加额外的数据到表单数据中，如自定义字段等。</li>
    </p>
    <p>
      FormData对象可以通过构造函数创建，也可以通过传入一个HTML表单元素创建,FormData对象有以下几个方法
      <li>append()：向FormData对象中添加一个键值对</li>
      <li>delete()：从FormData对象中删除一个键值对</li>
      <li>entries()：返回一个包含所有键值对的迭代器对象</li>
      <li>get()：返回在FormData对象中与给定键关联的第一个值</li>
      <li>getAll()：返回一个包含FormData对象中与给定键关联的所有值的数组</li>
      <li>has()：返回一个布尔值，表示FormData对象是否包含某个键</li>
      <li>keys()：返回一个包含所有键的迭代器对象</li>
      <li>
        set()：给FormData对象设置一个键值对，如果该键已存在，则覆盖原值，否则添加新的键值对
      </li>
      <li>values()：返回一个包含所有值的迭代器对象</li>
    </p>
    <form id="form1">
      <label for="search">星座:</label><input type="text" id="search" />
      <input type="button" value="搜索" id="btn1" />
    </form>
    <script>
      btn1.onclick = function () {
        let form1 = document.getElementById("form1");
        let formData1 = new FormData(form1);
        formData1.append("grade", "3");
        let xhr = new XMLHttpRequest();
        xhr.open("POST", "test.php", true);
        xhr.onload = function (e) {
          console.log(e);
        };
        xhr.send(formData1);
        console.log(xhr.response);
      };
    </script>
  </body>
</html>
